<!DOCTYPE html>
<html>
<head>
  
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="google-site-verification" content="MWTplLsvNmMXJQVPJfb04gqxKpg2V4Er4REm9TstZaM" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <title>과즙상 테스트</title>
	<meta property="og:url" content="https://fruitface.coo.kr" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="과즙상 테스트" />
    <meta property="og:description" content="인공지능으로 얼굴을 분석해 당신의 과즙상을 찾아줍니다! 체리상, 살구상, 복숭아상, 자몽상, 망고상 총 다섯 가지 중 내 얼굴은 어떤 과즙상일까요?"
    />
    <meta property="og:image" content="https://i.postimg.cc/4xMDgrmF/test.png" />
    <link href="https://fonts.googleapis.com/css?family=Jua&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">   
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-145482737-6"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-145482737-6');
    </script>
    <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5ea5339c6868aa13"></script>
   
</head>


<body>
  <nav class="navbar navbar-expand-lg navbar-light navbar-distance">
  <a class="navbar-brand" href="#">과즙상 테스트</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="#"> <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#"></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#"></a>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true"></a>
      </li>
    </ul>
  </div>
</nav>
    <div class="mt-2 container d-flex justify-content-center ad-banner">
        <ins class="kakao_ad_area" style="display:none;" 
 data-ad-unit    = "DAN-t4voiuu0zy9h" 
 data-ad-width   = "320" 
 data-ad-height  = "50"></ins>
    </div>
    
<script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
 
<div class="mt-5 container d-flex justify-content-center">
<div id="google_translate_element"></div>
    </div>
 <script type="text/javascript">
 function googleTranslateElementInit() {
     new google.translate.TranslateElement(
         {
             //gaTrack: true,  // Google 애널리틱스
            //gaId: 'UA-*******', // Google 애널리틱스 웹 속성 ID
             pageLanguage: 'ko', 
             includedLanguages: 'ko,en,ja,zh-CN,de,mn,ru,vi', 
             layout: google.translate.TranslateElement.InlineLayout.SIMPLE, autoDisplay: false, 
             multilanguagePage: true
         }, 
         'google_translate_element'
     );
 }
 </script>
 <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
   
    <section class="section">
        <h1 class="title">인공지능 과즙상 테스트</h1>
        <h2 class="subtitle">내 얼굴은 어떤 과즙상일까?</h2>
		<h3 class="sub-subtitle">* 업로드된 사진은 검사 이외의 용도로 사용되지 않으며, 어디에도 저장되지 않습니다.</h3>
    </section>
    <section class="youtube">
        <div class="container mt-5 youtube-cover d-flex flex-row-reverse"><img src="img/youtube-copy.jpg" alt="" class="youtube-icon"><a href="https://www.youtube.com/channel/UCQNE2JmbasNYbjGAcuBiRRg" class="youtube-link">제작도움: 조코딩 유튜브 채널</a></div>
    </section>

    <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <div class="mt-3 container file-upload">

        <div class="image-upload-wrap">
            <input class="file-upload-input" type='file' onchange="readURL(this);" accept="image/*" />
            <div class="drag-text">
                <img src="img/upload.svg"
     class="mt-3 pt-5 upload">
                <h3 class="mb-5 pb-5 pt-4 upload-text">얼굴 사진을 올려놓거나 클릭해서 업로드하세요!</h3>
            </div>
        </div>
        <div class="file-upload-content">
            <img class="file-upload-image" id="face-image" src="#" alt="your image" />
            <div id="loading" class="animated bounce">
                <div class="spinner-border" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
                <p class="text-center">AI가 당신의 얼굴을 분석중입니다.</p>
            </div>
            <p class="result-message"></p>
            <div id="label-container" class="d-flex flex-column justify-content-around"></div>
            <div id="addThis" class="addthis_inline_share_toolbox_6lz1"></div>
            
                <!-- Go to www.addthis.com/dashboard to customize your tools -->
                <div class="addthis_inline_share_toolbox"></div>
            
            <div class="pt-3 image-title-wrap">
                 <button type="button p-2" class="try-again-btn" onclick="gaReload1();" data-toggle="modal" data-target="#adModal">
                    <span class="try-again-text">다른 사진으로 재시도</span>
                </button>
            </div>
        </div>
    </div>
 <div class="mt-5 mb-5 container d-flex justify-content-center ad-banner">
        <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-sksboodi1gte" data-ad-width="320" data-ad-height="100"></ins>
    </div>
 <div class="container d-flex justify-content-center ad-banner">   
    <ins class="kakao_ad_area" style="display:none;" 
 data-ad-unit    = "DAN-vbsjphdrrj1x" 
 data-ad-width   = "320" 
 data-ad-height  = "50"></ins> 
    </div>
 <div class="container d-flex justify-content-center ad-banner">   
    <ins class="kakao_ad_area" style="display:none;" 
 data-ad-unit    = "DAN-sksboodi1gte" 
 data-ad-width   = "320" 
 data-ad-height  = "50"></ins> 
    </div>    

        <div id="coupang" class="mb-5 container d-flex justify-content-center">
         <script src="https://ads-partners.coupang.com/g.js"></script>
<script>
	new PartnersCoupang.G({ id:226276 });
</script>
    </div> 

<script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>    
<script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
<script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>

<div class="container d-flex justify-content-center">
<iframe width="320" height="180" src="https://www.youtube.com/embed/s6SITKSN9Q0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>

        <h4 class="mt-1 container d-flex justify-content-center">이런 앱 만들면 얼마 벌까? 충격적인 수익 공개합니다</h4>
    <div class="container pt-3">
        <div id="disqus_thread"></div>
    </div>
   
    <div id="webcam-container"></div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <div class="modal fade" id="adModal" tabindex="-1" role="dialog" aria-labelledby="adModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="adModalLabel">(AD)광고 - 재시도를 한번 더 눌러주세요.</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body d-flex justify-content-center">
                    <ins class="kakao_ad_area" style="display:none;" 
 data-ad-unit    = "DAN-urp5ud3gw601" 
 data-ad-width   = "300" 
 data-ad-height  = "250"></ins>
                </div>
                <div class="modal-footer d-flex justify-content-center">
                    <button type="button p-2" class="try-again-btn" onclick="gaReload2();">
                        <span class="try-again-text">다른 사진으로 재시도</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script>
        function gaReload1() {
            gtag('event', '다른 사진으로 재시도 1차', {
                'event_category': '다른 사진으로 재시도'
            });
        }
        function gaReload2() {
            gtag('event', '다른 사진으로 재시도 2차', {
                'event_category': '다른 사진으로 재시도'
            });
            window.location.reload();
        }
    </script>
    <script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
<script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                $('.image-upload-wrap').hide();
                $('#loading').show();
                $('.file-upload-image').attr('src', e.target.result);
                $('.file-upload-content').show();
                $('.image-title').html(input.files[0].name);
            };
            reader.readAsDataURL(input.files[0]);
            init().then(()=>{
                console.log("hello");
                predict();
                $('#loading').hide();
            });
        } else {
            removeUpload();
        }
    }

    function removeUpload() {
        $('.file-upload-input').replaceWith($('.file-upload-input').clone());
        $('.file-upload-content').hide();
        $('.image-upload-wrap').show();
    }
    $('.image-upload-wrap').bind('dragover', function() {
        $('.image-upload-wrap').addClass('image-dropping');
    });
    $('.image-upload-wrap').bind('dragleave', function() {
        $('.image-upload-wrap').removeClass('image-dropping');
    });
</script>
<script type="text/javascript">
    // More API functions here:
    // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image
    // the link to your model provided by Teachable Machine export panel
    const URL = "https://teachablemachine.withgoogle.com/models/4d9fq-4Zt/";
    let model, webcam, labelContainer, maxPredictions;
    // Load the image model and setup the webcam
    async function init() {
        const modelURL = URL + "model.json";
        const metadataURL = URL + "metadata.json";
        // load the model and metadata
        // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
        // or files from your local hard drive
        // Note: the pose library adds "tmImage" object to your window (window.tmImage)
        model = await tmImage.load(modelURL, metadataURL);
        maxPredictions = model.getTotalClasses();
        labelContainer = document.getElementById("label-container");
        for (let i = 0; i < maxPredictions; i++) { // and class labels
            labelContainer.appendChild(document.createElement("div"));
        }
    }
    // run the webcam image through the image model
    async function predict() {
        var image = document.getElementById("face-image")
        const prediction = await model.predict(image, false);
        prediction.sort((a, b) => parseFloat(b.probability) - parseFloat(a.probability));
        console.log(prediction[0].className);
        var resultTitle, resultExplain, resultCeleb;
        switch(prediction[0].className) {
  case "cherry":
    resultTitle = "새콤달콤 체리상"
    resultExplain = "상큼한 듯 달콤한, 달콤한 듯 상큼한 체리상! 체리 사탕처럼 새콤달콤한 당신과 함께라면 웃음이 끊이지 않을 거예요!" 
    resultCeleb = "체리상 연예인: 태민(샤이니), 김우석, 전소미, 구하라, 크리스탈"
    break;
  case "grapefruit":
    resultTitle = "상큼짜릿 자몽상"
    resultExplain = "자몽 에이드처럼 톡 쏘는 매력을 가진 자몽상! 청량한 인상으로 주변을 사로잡는 당신은, 한 번 빠지면 절대 헤어나올 수 없는 매력의 소유자네요!" 
    resultCeleb = "자몽상 연예인: 조이(레드벨벳), 이성경, 김도연(위키미키), 황민현(뉴이스트), 조슈아(세븐틴), 진영(B1A4)"
    break;
  case "peach":
    resultTitle = "뽀송순둥 복숭아상"
    resultExplain = "농장에서 갓 나온 듯, 달달한 과육의 소유자인 복숭아상! 러블리한 매력으로 어디에서도 사랑 받을 수 있는 사랑스러운 사람이네요!" 
    resultCeleb = "복숭아상 연예인: 설리, 정채연(다이아), 정국(방탄소년단), 수호(EXO), 임시완, 윈윈(NCT) "
    break;
  case "apricot":
    resultTitle = "달달보들 살구상"
    resultExplain = "따뜻하고 온화한 색을 가진, 살구상! 오븐에서 방금 막 나온 살구 타르트처럼, 따스한 당신과 함께라면 잔뜩 긴장해 얼어 붙은 마음도 녹아내릴 거예요!" 
    resultCeleb = "살구상 연예인: 아이유, 윤아(소녀시대), 웬디(레드벨벳), 차은우(아스트로), 김진우(위너), 박지훈"
    break;
  case "mango":
    resultTitle = "달콤말랑 망고상"
    resultExplain = "사르르 녹는 눈웃음의 소유자, 망고상! 망고 스무디처럼 시원한 미소를 짓는 당신이 한 번 웃어준다면, 그 언제라도 주변을 달달하게 만들 거예요!" 
    resultCeleb = "망고상 연예인: 백현(EXO), 지민(방탄소년단), 강다니엘, 다현(트와이스), 최유정(위키미키), 최예나(아이즈원)"
    break;
  default:
    resultTitle = "알 수 없음"
    resultExplain = "" 
    resultCeleb = ""
        }
        var title = "<div class='" + prediction[0].className + "-fruit-title'>" + resultTitle + "</div>"
        var explain = "<div class='-fruit-explain pt-2'>" + resultExplain + "</div>"
        var celeb = "<div class='" + prediction[0].className + "-fruit-celeb pt-2 pb-2'>" + resultCeleb + "</div>"
        $('.result-message').html(title + explain + celeb);
       var barWidth;
            for (let i = 0; i < maxPredictions; i++) {
                if (prediction[i].probability.toFixed(2) > 0.1) {
                    barWidth = Math.round(prediction[i].probability.toFixed(2) * 100) + "%";
                } else if (prediction[i].probability.toFixed(2) >= 0.01) {
                    barWidth = "4%"
                } else {
                    barWidth = "2%"
                }
                var labelTitle;
                switch (prediction[i].className) {
                    case "cherry":
                        labelTitle = "체리상"
                        break;
                    case "grapefruit":
                        labelTitle = "자몽상"
                        break;
                    case "peach":
                        labelTitle = "복숭아상"
                        break;
                    case "apricot":
                        labelTitle = "살구상"
                        break;
                    case "mango":
                        labelTitle = "망고상"
                        break;
                    default:
                        labelTitle = "알수없음"
                }
                var label = "<div class='fruit-label d-flex align-items-center'>" + labelTitle + "</div>"
                var bar = "<div class='bar-container position-relative container'><div class='" + prediction[i].className + "-box'></div><div class='d-flex justify-content-center align-items-center " + prediction[i].className + "-bar' style='width: " + barWidth + "'><span class='d-block percent-text'>" + Math.round(prediction[i].probability.toFixed(2) * 100) + "%</span></div></div>"
                labelContainer.childNodes[i].innerHTML = label + bar;
            }
        }
    </script>
    <script>
        
    </script>
</body>
        

<!-- Copyright (c) 2020 by Aaron Vanston (https://codepen.io/aaronvanston/pen/yNYOXR)

//Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 -->

</html>